{
    "id": "org.kde.digikam",
    "base": "io.qt.qtwebengine.BaseApp",
    "base-version": "6.10",
    "runtime": "org.kde.Platform",
    "runtime-version": "6.10",
    "sdk": "org.kde.Sdk",
    "command": "digikam",
    "finish-args": [
        "--device=all",
        "--env=DK_PLUGIN_PATH=/app/lib/plugins/digikam",
        "--filesystem=/media",
        "--filesystem=/run/media",
        "--filesystem=home",
        "--filesystem=xdg-pictures",
        "--share=ipc",
        "--share=network",
        "--socket=cups",
        "--socket=fallback-x11",
        "--socket=wayland",
        "--socket=pulseaudio",
        "--system-talk-name=org.freedesktop.Avahi",
        "--system-talk-name=org.freedesktop.UDisks2",
        "--talk-name=org.kde.StatusNotifierWatcher"
    ],
    "rename-icon": "digikam",
    "cleanup": [
        "/doc",
        "/include",
        "/lib/cmake",
        "/lib/libexec",
        "/lib/pkgconfig",
        "/lib/vigra/*.cmake",
        "/man",
        "/share/doc",
        "/share/eigen3",
        "/share/man",
        "/share/pkgconfig",
        "*.a"
    ],
    "modules": [
        {
            "name": "digikam",
            "buildsystem": "cmake-ninja",
            "builddir": true,
            "config-opts": [
                "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
                "-DENABLE_MYSQLSUPPORT=ON",
                "-DENABLE_INTERNALMYSQL=ON",
                "-DENABLE_MEDIAPLAYER=ON",
                "-DENABLE_DBUS=ON",
                "-DENABLE_APPSTYLES=ON",
                "-DENABLE_QWEBENGINE=ON",
                "-DBUILD_TESTING=OFF",
                "-DSSE4_1_FOUND=OFF",
                "-DBUILD_WITH_QT6=ON"
            ],
            "post-install": [
                "gunzip -S z /app/share/icons/hicolor/scalable/apps/*.svgz"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.kde.org/stable/digikam/8.8.0/digiKam-8.8.0.tar.xz",
                    "sha256": "db3a1b6e3c73f903e3dff8003f52455dd2ecd198cb66534fee4abbd0bdeb6b9a",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 437,
                        "stable-only": true,
                        "url-template": "https://download.kde.org/stable/digikam/$version/digiKam-$version.tar.xz"
                    }
                },
                {
                    "type": "patch",
                    "paths": [
                        "patches/digikam-Use-Eigen3-cmake-configuration-shared-on-the-system.patch",
                        "patches/digikam-Fix-build-with-Eigen3-5.x.patch"
                    ]
                }
            ],
            "modules": [
                {
                    "name": "perl",
                    "no-autogen": true,
                    "config-opts": [
                        "-des",
                        "-Duseshrplib"
                    ],
                    "build-options": {
                        "cflags": "-fPIC",
                        "ldflags": "-fpic"
                    },
                    "cleanup": [
                        "*.h"
                    ],
                    "post-install": [
                        "find ${FLATPAK_DEST}/lib/perl5/ -name \\*.so -exec chmod u+w {} \\;"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://www.cpan.org/src/5.0/perl-5.42.0.tar.xz",
                            "sha256": "73cf6cc1ea2b2b1c110a18c14bbbc73a362073003893ffcedc26d22ebdbdd0c3",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 13599,
                                "stable-only": true,
                                "url-template": "https://www.cpan.org/src/${major}.0/perl-$version.tar.xz"
                            }
                        },
                        {
                            "type": "script",
                            "dest-filename": "configure",
                            "commands": [
                                "exec ./configure.gnu $@"
                            ]
                        }
                    ]
                },
                {
                    "name": "boost",
                    "buildsystem": "simple",
                    "build-commands": [
                        "./bootstrap.sh --prefix=/app --with-libraries=system,filesystem",
                        "./b2 install variant=release link=shared runtime-link=shared cxxflags='$CXXFLAGS' linkflags='$LDFLAGS' -j $FLATPAK_BUILDER_N_JOBS"
                    ],
                    "cleanup": [
                        "/lib/libboost_*.a"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://archives.boost.io/release/1.90.0/source/boost_1_90_0.tar.bz2",
                            "sha256": "49551aff3b22cbc5c5a9ed3dbc92f0e23ea50a0f7325b0d198b705e8ee3fc305",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 6845,
                                "stable-only": true,
                                "url-template": "https://archives.boost.io/release/$version/source/boost_${major}_${minor}_$patch.tar.bz2"
                            }
                        }
                    ]
                },
                {
                    "name": "eigen",
                    "buildsystem": "cmake-ninja",
                    "builddir": true,
                    "cleanup": [
                        "*.la"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://gitlab.com/libeigen/eigen/-/archive/5.0.1/eigen-5.0.1.tar.bz2",
                            "sha256": "e4de6b08f33fd8b8985d2f204381408c660bffa6170ac65b68ae1bd3cd575c0a",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 666,
                                "stable-only": true,
                                "url-template": "https://gitlab.com/libeigen/eigen/-/archive/$version/eigen-$version.tar.bz2"
                            }
                        }
                    ]
                },
                {
                    "name": "opencv",
                    "buildsystem": "cmake-ninja",
                    "builddir": true,
                    "config-opts": [
                        "-DBUILD_EXAMPLES=OFF",
                        "-DBUILD_TESTS=OFF",
                        "-DBUILD_DOCS=OFF",
                        "-DBUILD_PERF_TESTS=OFF",
                        "-DBUILD_NEW_PYTHON_SUPPORT=OFF",
                        "-DBUILD_ZLIB=OFF",
                        "-DOPENCV_BUILD_3RDPARTY_LIBS=OFF",
                        "-DINSTALL_C_EXAMPLES=OFF",
                        "-DINSTALL_PYTHON_EXAMPLES=OFF",
                        "-DBUILD_opencv_core=ON",
                        "-DBUILD_opencv_imgproc=ON",
                        "-DBUILD_opencv_imgcodecs=ON",
                        "-DBUILD_opencv_objdetect=ON",
                        "-DBUILD_opencv_calib3d=ON",
                        "-DBUILD_opencv_features2d=ON",
                        "-DBUILD_opencv_flann=ON",
                        "-DBUILD_opencv_dnn=ON",
                        "-DBUILD_opencv_photo=OFF",
                        "-DBUILD_opencv_java=OFF",
                        "-DBUILD_opencv_java_bindings_generator=OFF",
                        "-DBUILD_opencv_js=OFF",
                        "-DBUILD_opencv_python2=OFF",
                        "-DBUILD_opencv_python3=OFF",
                        "-DBUILD_opencv_python_bindings_generator=OFF",
                        "-DBUILD_opencv_shape=OFF",
                        "-DBUILD_opencv_highgui=OFF",
                        "-DBUILD_opencv_superres=OFF",
                        "-DBUILD_opencv_stitching=OFF",
                        "-DBUILD_opencv_videostab=OFF",
                        "-DBUILD_opencv_videoio=OFF",
                        "-DBUILD_opencv_video=OFF",
                        "-DBUILD_opencv_apps=OFF",
                        "-DBUILD_opencv_gapi=OFF",
                        "-DWITH_PROTOBUF=ON",
                        "-DWITH_1394=OFF",
                        "-DWITH_VTK=OFF",
                        "-DWITH_DIRECTX=OFF",
                        "-DWITH_DSHOW=OFF",
                        "-DWITH_EIGEN=OFF",
                        "-DWITH_FFMPEG=OFF",
                        "-DWITH_GSTREAMER=OFF",
                        "-DWITH_GTK=OFF",
                        "-DWITH_IPP=OFF",
                        "-DWITH_JASPER=OFF",
                        "-DWITH_JPEG=OFF",
                        "-DWITH_MATLAB=OFF",
                        "-DWITH_OPENJPEG=OFF",
                        "-DWITH_OPENEXR=OFF",
                        "-DWITH_OPENNI=OFF",
                        "-DWITH_OPENMP=OFF",
                        "-DWITH_PNG=OFF",
                        "-DWITH_PVAPI=OFF",
                        "-DWITH_WIN32UI=OFF",
                        "-DWITH_QT=OFF",
                        "-DWITH_QUICKTIME=OFF",
                        "-DWITH_QT_OPENGL=OFF",
                        "-DWITH_TBB=OFF",
                        "-DWITH_TIFF=OFF",
                        "-DWITH_UNICAP=OFF",
                        "-DWITH_V4L=OFF",
                        "-DWITH_VFW=OFF",
                        "-DWITH_VIDEOINPUT=OFF",
                        "-DWITH_XINE=OFF",
                        "-DWITH_VA_INTEL=OFF",
                        "-DWITH_GPHOTO2=OFF",
                        "-DWITH_WEBP=OFF",
                        "-DWITH_IMGCODEC_HDR=OFF",
                        "-DWITH_IMGCODEC_SUNRASTER=OFF",
                        "-DWITH_IMGCODEC_PXM=OFF",
                        "-DWITH_CUDA=OFF",
                        "-DWITH_CUFFT=OFF",
                        "-DWITH_CUBLAS=OFF",
                        "-DWITH_NVCUVID=OFF",
                        "-DWITH_OPENCL=OFF",
                        "-DWITH_OPENCL_SVM=OFF",
                        "-DWITH_OPENCLAMDFFT=OFF",
                        "-DWITH_OPENCLAMDBLAS=OFF",
                        "-DCV_ENABLE_INTRINSICS=OFF",
                        "-DCV_DISABLE_OPTIMIZATION=ON",
                        "-DCV_TRACE=OFF",
                        "-DWITH_OPENJPEG=OFF"
                    ],
                    "cleanup": [
                        "/bin"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/opencv/opencv/archive/4.12.0.tar.gz",
                            "sha256": "44c106d5bb47efec04e531fd93008b3fcd1d27138985c5baf4eafac0e1ec9e9d",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 6615,
                                "stable-only": true,
                                "url-template": "https://github.com/opencv/opencv/archive/$version.tar.gz"
                            }
                        }
                    ]
                },
                {
                    "name": "inih",
                    "buildsystem": "meson",
                    "config-opts": [
                        "-Ddefault_library=shared",
                        "-Ddistro_install=true",
                        "-Dwith_INIReader=true"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/benhoyt/inih/archive/refs/tags/r62.tar.gz",
                            "sha256": "9c15fa751bb8093d042dae1b9f125eb45198c32c6704cd5481ccde460d4f8151",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 11600,
                                "stable-only": true,
                                "url-template": "https://github.com/benhoyt/inih/archive/refs/tags/r$version.tar.gz"
                            }
                        }
                    ]
                },
                {
                    "name": "exiv2",
                    "buildsystem": "cmake-ninja",
                    "builddir": true,
                    "config-opts": [
                        "-DBUILD_SHARED_LIBS=ON",
                        "-DEXIV2_ENABLE_XMP=ON",
                        "-DEXIV2_ENABLE_EXTERNAL_XMP=OFF",
                        "-DEXIV2_ENABLE_PNG=ON",
                        "-DEXIV2_ENABLE_NLS=ON",
                        "-DEXIV2_ENABLE_PRINTUCS2=ON",
                        "-DEXIV2_ENABLE_LENSDATA=ON",
                        "-DEXIV2_ENABLE_VIDEO=OFF",
                        "-DEXIV2_ENABLE_WEBREADY=OFF",
                        "-DEXIV2_ENABLE_DYNAMIC_RUNTIME=OFF",
                        "-DEXIV2_ENABLE_CURL=OFF",
                        "-DEXIV2_ENABLE_SSH=OFF",
                        "-DEXIV2_ENABLE_BMFF=ON",
                        "-DEXIV2_BUILD_SAMPLES=OFF",
                        "-DEXIV2_BUILD_PO=OFF",
                        "-DEXIV2_BUILD_EXIV2_COMMAND=OFF",
                        "-DEXIV2_BUILD_UNIT_TESTS=OFF",
                        "-DEXIV2_BUILD_DOC=OFF",
                        "-DEXIV2_TEAM_EXTRA_WARNINGS=OFF",
                        "-DEXIV2_TEAM_WARNINGS_AS_ERRORS=OFF",
                        "-DEXIV2_TEAM_USE_SANITIZERS=OFF",
                        "-DEXIV2_ENABLE_WIN_UNICODE=OFF"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/Exiv2/exiv2/archive/refs/tags/v0.28.7.tar.gz",
                            "sha256": "5e292b02614dbc0cee40fe1116db2f42f63ef6b2ba430c77b614e17b8d61a638",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 769,
                                "stable-only": true,
                                "url-template": "https://github.com/Exiv2/exiv2/archive/refs/tags/v$version.tar.gz"
                            }
                        }
                    ]
                },
                {
                    "name": "lensfun",
                    "buildsystem": "cmake-ninja",
                    "config-opts": [
                        "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
                        "-DCMAKE_POLICY_VERSION_MINIMUM=3.5",
                        "-DBUILD_STATIC=OFF",
                        "-DBUILD_TESTS=OFF",
                        "-DBUILD_LENSTOOL=OFF",
                        "-DBUILD_DOC=OFF",
                        "-DINSTALL_PYTHON_MODULE=OFF",
                        "-DINSTALL_HELPER_SCRIPTS=OFF"
                    ],
                    "build-options": {
                        "arch": {
                            "aarch64": {
                                "config-opts": [
                                    "-DBUILD_FOR_SSE=off",
                                    "-DBUILD_FOR_SSE2=off"
                                ]
                            }
                        }
                    },
                    "cleanup": [
                        "*.la"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/lensfun/lensfun.git",
                            "tag": "v0.3.4",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 1548,
                                "stable-only": true,
                                "tag-template": "v$version"
                            },
                            "commit": "101c745e847a5de4a1e569a94368ce2027198598"
                        }
                    ]
                },
                {
                    "name": "ImageMagick",
                    "builddir": true,
                    "config-opts": [
                        "--enable-shared",
                        "--disable-static",
                        "--disable-docs",
                        "--with-modules",
                        "--with-threads",
                        "--with-png"
                    ],
                    "cleanup": [
                        "/bin",
                        "/etc",
                        "/share/ImageMagick-*",
                        "/lib/ImageMagick-*/modules-*/filters/*.la",
                        "/lib/libMagick*.la"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://imagemagick.org/archive/releases/ImageMagick-7.1.2-10.tar.gz",
                            "sha256": "36a3fce617f0c40236fb96b02b8699753892380140bfef9ba72e6d1e8edfb420",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 1372,
                                "stable-only": true,
                                "url-template": "https://imagemagick.org/archive/releases/ImageMagick-$version.tar.gz"
                            }
                        }
                    ]
                },
                {
                    "name": "libgphoto2",
                    "builddir": true,
                    "cleanup": [
                        "/doc",
                        "*.la"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/gphoto/libgphoto2.git",
                            "tag": "v2.5.33",
                            "commit": "fb8bd54bf1fbf019ea7fd262d7de98bce3a28701",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 12558,
                                "stable-only": true,
                                "tag-template": "v$version"
                            }
                        },
                        {
                            "type": "script",
                            "dest-filename": "autogen.sh",
                            "commands": [
                                "AUTOMAKE=\"automake --foreign\" autoreconf -vfis"
                            ]
                        }
                    ]
                },
                {
                    "name": "jasper",
                    "buildsystem": "cmake-ninja",
                    "builddir": true,
                    "config-opts": [
                        "-DALLOW_IN_SOURCE_BUILD=ON",
                        "-DJAS_ENABLE_SHARED=ON",
                        "-DJAS_ENABLE_LIBJPEG=ON",
                        "-DJAS_ENABLE_OPENGL=OFF",
                        "-DJAS_LOCAL=OFF",
                        "-DJAS_ENABLE_DOC=OFF",
                        "-DJAS_ENABLE_PROGRAMS=OFF"
                    ],
                    "cleanup": [
                        "*.la"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/mdadams/jasper.git",
                            "tag": "version-4.2.8",
                            "commit": "7c979692ede3914a481b859dbeb307dff48bf175",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 1421,
                                "stable-only": true,
                                "tag-template": "version-$version"
                            }
                        }
                    ]
                },
                {
                    "name": "libksane",
                    "buildsystem": "cmake-ninja",
                    "builddir": true,
                    "config-opts": [
                        "-DQT_MAJOR_VERSION=6"
                    ],
                    "cleanup": [
                        "*.la"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://download.kde.org/stable/release-service/25.12.0/src/libksane-25.12.0.tar.xz",
                            "sha256": "b4fde4c6a9151679ed52e4d572ed6688dd4b489aa2a23534d8f132cfbdd3ab90",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 8763,
                                "stable-only": true,
                                "url-template": "https://download.kde.org/stable/release-service/$version/src/libksane-$version.tar.xz"
                            }
                        }
                    ],
                    "modules": [
                        {
                            "name": "sane-backends",
                            "builddir": true,
                            "config-opts": [
                                "--disable-saned",
                                "--with-avahi",
                                "--with-libcurl",
                                "--with-usb",
                                "--with-snmp",
                                "--with-v4l"
                            ],
                            "post-install": [
                                "grep '^[[:blank:]]*localhost[[:blank:]]*$' \"${FLATPAK_DEST}/etc/sane.d/net.conf\" || echo 'localhost' >> \"${FLATPAK_DEST}/etc/sane.d/net.conf\";",
                                "grep '^[[:blank:]]*net[[:blank:]]*$' \"${FLATPAK_DEST}/etc/sane.d/dll.conf\" || echo 'net' >> \"${FLATPAK_DEST}/etc/sane.d/dll.conf\";"
                            ],
                            "cleanup": [
                                "*.la"
                            ],
                            "sources": [
                                {
                                    "type": "git",
                                    "url": "https://gitlab.com/sane-project/backends.git",
                                    "tag": "1.4.0",
                                    "commit": "c7e4b5e35e3d614d2b1181d760a717bfc395a203",
                                    "x-checker-data": {
                                        "type": "anitya",
                                        "project-id": 4760,
                                        "stable-only": true,
                                        "tag-template": "$version"
                                    }
                                }
                            ],
                            "modules": [
                                {
                                    "name": "net-snmp",
                                    "builddir": true,
                                    "no-parallel-make": true,
                                    "config-opts": [
                                        "--disable-static",
                                        "--enable-shared",
                                        "--disable-embedded-perl",
                                        "--without-perl-modules",
                                        "--without-rpm",
                                        "--enable-ucd-snmp-compatibility",
                                        "--enable-ipv6",
                                        "--with-openssl",
                                        "--with-pic",
                                        "--with-default-snmp-version=3",
                                        "--with-sys-contact=root@localhost"
                                    ],
                                    "build-options": {
                                        "ldflags": "-lncurses -ltinfo"
                                    },
                                    "cleanup": [
                                        "*.la"
                                    ],
                                    "sources": [
                                        {
                                            "type": "archive",
                                            "url": "https://downloads.sourceforge.net/project/net-snmp/net-snmp/5.9.4/net-snmp-5.9.4.tar.gz",
                                            "sha256": "8b4de01391e74e3c7014beb43961a2d6d6fa03acc34280b9585f4930745b0544",
                                            "x-checker-data": {
                                                "type": "anitya",
                                                "project-id": 2062,
                                                "stable-only": true,
                                                "url-template": "https://downloads.sourceforge.net/project/net-snmp/net-snmp/$version/net-snmp-$version.tar.gz"
                                            }
                                        },
                                        {
                                            "type": "shell",
                                            "commands": [
                                                "cp -p /usr/share/automake-*/config.{sub,guess} ."
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "libieee1284",
                                    "config-opts": [
                                        "--disable-static",
                                        "--without-python"
                                    ],
                                    "cleanup": [
                                        "*.la"
                                    ],
                                    "sources": [
                                        {
                                            "type": "archive",
                                            "url": "https://downloads.sourceforge.net/project/libieee1284/libieee1284/0.2.11//libieee1284-0.2.11.tar.bz2",
                                            "sha256": "7730de107782e5d2b071bdcb5b06a44da74856f00ef4a9be85d1ba4806a38f1a",
                                            "x-checker-data": {
                                                "type": "anitya",
                                                "project-id": 229574,
                                                "stable-only": true,
                                                "url-template": "https://downloads.sourceforge.net/project/libieee1284/libieee1284/$version//libieee1284-$version.tar.bz2"
                                            }
                                        },
                                        {
                                            "type": "patch",
                                            "path": "patches/libieee1284-strict-aliasing.patch"
                                        },
                                        {
                                            "type": "shell",
                                            "commands": [
                                                "cp -p /usr/share/automake-*/config.{sub,guess} ."
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "name": "poppler",
                                    "buildsystem": "cmake-ninja",
                                    "builddir": true,
                                    "config-opts": [
                                        "-DENABLE_LIBOPENJPEG=none",
                                        "-DENABLE_UNSTABLE_API_ABI_HEADERS=ON",
                                        "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
                                        "-DBUILD_GTK_TESTS=OFF",
                                        "-DBUILD_QT5_TESTS=OFF",
                                        "-DBUILD_QT6_TESTS=OFF",
                                        "-DBUILD_CPP_TESTS=OFF",
                                        "-DENABLE_UTILS=OFF",
                                        "-DENABLE_CPP=OFF",
                                        "-DENABLE_GLIB=OFF",
                                        "-DENABLE_QT5=OFF",
                                        "-DENABLE_QT6=ON"
                                    ],
                                    "cleanup": [
                                        "*.la"
                                    ],
                                    "sources": [
                                        {
                                            "type": "archive",
                                            "url": "https://poppler.freedesktop.org/poppler-25.12.0.tar.xz",
                                            "sha256": "c18b40eb36b1a0c5b86e29ca054bf0770304583da4f2cdd42fe86eca6a20de48",
                                            "x-checker-data": {
                                                "type": "anitya",
                                                "project-id": 3686,
                                                "stable-only": true,
                                                "url-template": "https://poppler.freedesktop.org/poppler-$version.tar.xz"
                                            }
                                        }
                                    ],
                                    "modules": [
                                        {
                                            "name": "poppler-data",
                                            "buildsystem": "cmake-ninja",
                                            "builddir": true,
                                            "config-opts": [
                                                "-DCMAKE_BUILD_TYPE=RelWithDebInfo"
                                            ],
                                            "cleanup": [
                                                "*.la"
                                            ],
                                            "sources": [
                                                {
                                                    "type": "archive",
                                                    "url": "https://poppler.freedesktop.org/poppler-data-0.4.12.tar.gz",
                                                    "sha256": "c835b640a40ce357e1b83666aabd95edffa24ddddd49b8daff63adb851cdab74",
                                                    "x-checker-data": {
                                                        "type": "anitya",
                                                        "project-id": 3687,
                                                        "stable-only": true,
                                                        "url-template": "https://poppler.freedesktop.org/poppler-data-$version.tar.gz"
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "ksanecore",
                            "buildsystem": "cmake-ninja",
                            "builddir": true,
                            "config-opts": [
                                "-DQT_MAJOR_VERSION=6"
                            ],
                            "cleanup": [
                                "*.la"
                            ],
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://download.kde.org/stable/release-service/25.12.0/src/ksanecore-25.12.0.tar.xz",
                                    "sha256": "617d01d96ea78bad4c3d681517e64b16f037f9ca387c25a05ecefbc59e3cdb32",
                                    "x-checker-data": {
                                        "type": "anitya",
                                        "project-id": 8763,
                                        "stable-only": true,
                                        "url-template": "https://download.kde.org/stable/release-service/$version/src/ksanecore-$version.tar.xz"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "liblqr",
                    "builddir": true,
                    "build-options": {
                        "cflags": "-std=gnu17"
                    },
                    "cleanup": [
                        "*.la"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/carlobaldassi/liblqr/archive/refs/tags/v0.4.3.tar.gz",
                            "sha256": "64b0c4ac76d39cca79501b3f53544af3fc5f72b536ac0f28d2928319bfab6def",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 229588,
                                "stable-only": true,
                                "url-template": "https://github.com/carlobaldassi/liblqr/archive/refs/tags/v$version.tar.gz"
                            }
                        }
                    ]
                },
                {
                    "name": "x265",
                    "buildsystem": "cmake-ninja",
                    "builddir": true,
                    "build-options": {
                        "arch": {
                            "aarch64": {
                                "cxxflags": "-fPIC"
                            }
                        }
                    },
                    "config-opts": [
                        "-DCMAKE_POLICY_VERSION_MINIMUM=3.5"
                    ],
                    "subdir": "source",
                    "cleanup": [
                        "*.la"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://bitbucket.org/multicoreware/x265_git.git",
                            "tag": "4.1",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 7275,
                                "stable-only": true,
                                "tag-template": "$version"
                            },
                            "commit": "1d117bed4747758b51bd2c124d738527e30392cb"
                        },
                        {
                            "type": "patch",
                            "path": "./patches/x265-Fix-CMake-build-error.patch"
                        }
                    ]
                },
                "shared-modules/glu/glu-9.json"
            ]
        },
        {
            "name": "mosaicwall",
            "buildsystem": "cmake-ninja",
            "builddir": true,
            "config-opts": [
                "-DCMAKE_POLICY_VERSION_MINIMUM=3.5",
                "-DENABLE_DPLUGIN=ON",
                "-DBUILD_WITH_QT6=ON"
            ],
            "cleanup": [
                "*.la"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/scheckmedia/ImageMosaicWall.git",
                    "commit": "a03eed03ae37831f002587145066476d2dc44eea"
                }
            ]
        },
        {
            "name": "hugin",
            "buildsystem": "cmake-ninja",
            "builddir": true,
            "cleanup": [
                "*.la"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.sourceforge.net/project/hugin/hugin/hugin-2025.0/hugin-2025.0.0.tar.bz2",
                    "sha256": "0de27a5d5432e36d4e5d38ac25d7bcafc7b7dd542aab031640a61ed66767076c",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 1341,
                        "stable-only": true,
                        "url-template": "https://download.sourceforge.net/project/hugin/hugin/hugin-$major.$minor/hugin-$version.tar.bz2"
                    }
                }
            ],
            "modules": [
                {
                    "name": "wxWidgets",
                    "buildsystem": "cmake-ninja",
                    "builddir": true,
                    "cleanup": [
                        "*.la"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/wxWidgets/wxWidgets/releases/download/v3.3.1/wxWidgets-3.3.1.tar.bz2",
                            "sha256": "f936c8d694f9c49a367a376f99c751467150a4ed7cbf8f4723ef19b2d2d9998d",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 5150,
                                "stable-only": true,
                                "url-template": "https://github.com/wxWidgets/wxWidgets/releases/download/v$version/wxWidgets-$version.tar.bz2"
                            }
                        }
                    ]
                },
                {
                    "name": "vigra",
                    "buildsystem": "cmake-ninja",
                    "builddir": true,
                    "config-opts": [
                        "-DWITH_OPENEXR=ON"
                    ],
                    "cleanup": [
                        "*.la"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/ukoethe/vigra.git",
                            "tag": "Version-1-12-2",
                            "commit": "1c09a8256b50f84819b9d874ba901dea543fb65c",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 15957,
                                "stable-only": true,
                                "tag-template": "Version-$version"
                            }
                        }
                    ],
                    "modules": [
                        {
                            "name": "openexr",
                            "buildsystem": "cmake-ninja",
                            "builddir": true,
                            "cleanup": [
                                "*.la"
                            ],
                            "sources": [
                                {
                                    "type": "git",
                                    "url": "https://github.com/AcademySoftwareFoundation/openexr.git",
                                    "tag": "v3.4.4",
                                    "commit": "741ecb82ccdb291ce5b04713fc6c03208753575e",
                                    "x-checker-data": {
                                        "type": "anitya",
                                        "project-id": 13289,
                                        "stable-only": true,
                                        "tag-template": "v$version"
                                    }
                                }
                            ],
                            "modules": [
                                {
                                    "name": "imath",
                                    "buildsystem": "cmake-ninja",
                                    "builddir": true,
                                    "cleanup": [
                                        "*.la"
                                    ],
                                    "sources": [
                                        {
                                            "type": "git",
                                            "url": "https://github.com/AcademySoftwareFoundation/Imath.git",
                                            "tag": "v3.2.2",
                                            "commit": "1e480d11cb98b032a2dece9b9a8730512effc7f6",
                                            "x-checker-data": {
                                                "type": "anitya",
                                                "project-id": 223366,
                                                "stable-only": true,
                                                "tag-template": "v$version"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "name": "libdeflate",
                                    "buildsystem": "cmake-ninja",
                                    "builddir": true,
                                    "config-opts": [
                                        "-DLIBDEFLATE_BUILD_STATIC_LIB=OFF"
                                    ],
                                    "cleanup": [
                                        "*.la"
                                    ],
                                    "sources": [
                                        {
                                            "type": "git",
                                            "url": "https://github.com/ebiggers/libdeflate",
                                            "tag": "v1.25",
                                            "commit": "c8c56a20f8f621e6a966b716b31f1dedab6a41e3",
                                            "x-checker-data": {
                                                "type": "anitya",
                                                "project-id": 242778,
                                                "stable-only": true,
                                                "tag-template": "v$version"
                                            }
                                        }
                                    ]
                                },
                                {
                                    "name": "openjph",
                                    "buildsystem": "cmake-ninja",
                                    "builddir": true,
                                    "config-opts": [
                                        "-DOJPH_BUILD_EXECUTABLES=OFF"
                                    ],
                                    "cleanup": [
                                        "*.la"
                                    ],
                                    "sources": [
                                        {
                                            "type": "git",
                                            "url": "https://github.com/aous72/OpenJPH",
                                            "tag": "0.25.3",
                                            "commit": "762528c09981f6e9a4c6863fb15fcb5ce42736e5",
                                            "x-checker-data": {
                                                "type": "anitya",
                                                "project-id": 375199,
                                                "stable-only": true,
                                                "tag-template": "$version"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                "shared-modules/glew/glew.json",
                {
                    "name": "libpano13",
                    "buildsystem": "cmake-ninja",
                    "builddir": true,
                    "cleanup": [
                        "*.la"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://downloads.sourceforge.net/project/panotools/libpano13/libpano13-2.9.23/libpano13-2.9.23.tar.gz",
                            "sha256": "e7c076d37a14c39434962115e47ddbe18452ca3de5ce40e2aaefa7cf5815ea28",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 230121,
                                "stable-only": true,
                                "url-template": "https://downloads.sourceforge.net/project/panotools/libpano13/libpano13-$version/libpano13-$version.tar.gz"
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "enblend",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DCMAKE_POLICY_VERSION_MINIMUM=3.5",
                "-DENABLE_OPENMP=on"
            ],
            "modules": [
                {
                    "name": "gsl",
                    "config-opts": [
                        "--enable-shared",
                        "--disable-static"
                    ],
                    "cleanup": [
                        "*.la"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://ftp.fau.de/gnu/gsl/gsl-2.8.tar.gz",
                            "sha256": "6a99eeed15632c6354895b1dd542ed5a855c0f15d9ad1326c6fe2b2c9e423190",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 1267,
                                "stable-only": true,
                                "url-template": "https://ftp.fau.de/gnu/gsl/gsl-$version.tar.gz"
                            }
                        }
                    ]
                }
            ],
            "cleanup": [
                "*.la"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.sourceforge.net/project/enblend/enblend-enfuse/enblend-enfuse-4.2/enblend-enfuse-4.2.tar.gz",
                    "sha256": "8703e324939ebd70d76afd350e56800f5ea2c053a040a5f5218b2a1a4300bd48",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 17784,
                        "stable-only": true,
                        "url-template": "https://download.sourceforge.net/project/enblend/enblend-enfuse/enblend-enfuse-$version/enblend-enfuse-$version.tar.gz"
                    }
                },
                {
                    "type": "patch",
                    "path": "patches/enblend-cmake.patch"
                },
                {
                    "type": "patch",
                    "path": "patches/enblend-dl.patch"
                },
                {
                    "type": "patch",
                    "path": "patches/enblend-cxx.patch"
                }
            ]
        },
        {
            "name": "exiftool",
            "buildsystem": "simple",
            "build-commands": [
                "perl Makefile.PL",
                "make install"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/exiftool/exiftool.git",
                    "tag": "13.43",
                    "commit": "dbd6def5620f4d7e4ab02d9ee5de498263ea73c1",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 6175,
                        "stable-only": true,
                        "tag-template": "$version"
                    }
                }
            ],
            "modules": [
                {
                    "name": "exiftool-brotli",
                    "buildsystem": "simple",
                    "build-commands": [
                        "perl-libs/install.sh"
                    ],
                    "post-install": [
                        "find ${FLATPAK_DEST}/lib/perl5/site_perl/ -name \\*.so -exec chmod u+w {} \\;"
                    ],
                    "cleanup": [
                        "/bin",
                        "/man"
                    ],
                    "sources": [
                        {
                            "dest": "perl-libs/ExtUtils-PkgConfig",
                            "sha256": "bbeaced995d7d8d10cfc51a3a5a66da41ceb2bc04fedcab50e10e6300e801c6e",
                            "type": "archive",
                            "url": "https://cpan.metacpan.org/authors/id/X/XA/XAOC/ExtUtils-PkgConfig-1.16.tar.gz"
                        },
                        {
                            "dest": "perl-libs/IO-Compress-Brotli",
                            "sha256": "37f40dd7cee44acea26f2f763a773e61d4ec223305ddeeca4612443cbf288fbf",
                            "type": "archive",
                            "url": "https://cpan.metacpan.org/authors/id/T/TI/TIMLEGGE/IO-Compress-Brotli-0.019.tar.gz"
                        },
                        {
                            "type": "patch",
                            "dest": "perl-libs/IO-Compress-Brotli",
                            "path": "patches/IO-Compress-Brotli-0.019-Use-pkgconfig-instead-of-bundled-libbrotli.patch"
                        },
                        {
                            "commands": [
                                "set -e",
                                "function make_install {",
                                "    mod_dir=$1",
                                "    cd $mod_dir",
                                "    if [ -f 'Makefile.PL' ]; then",
                                "        perl Makefile.PL PREFIX=${FLATPAK_DEST} && make install PREFIX=${FLATPAK_DEST}",
                                "    elif [ -f 'Build.PL' ]; then",
                                "        perl Build.PL && ./Build && ./Build install",
                                "    else",
                                "        echo 'No Makefile.PL or Build.PL found. Do not know how to install this module'",
                                "        exit 1",
                                "    fi",
                                "}",
                                "(make_install perl-libs/ExtUtils-PkgConfig)",
                                "(make_install perl-libs/IO-Compress-Brotli)"
                            ],
                            "dest": "perl-libs",
                            "dest-filename": "install.sh",
                            "type": "script"
                        }
                    ]
                }
            ]
        }
    ]
}
